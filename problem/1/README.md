# 问题收集目录

本目录收集了游戏测试过程中发现的所有问题。

## 测试概况

**测试日期**: 2026-02-26
**测试模式**: 单人模式（玩家 vs 4个AI）
**游戏ID**: 1772094298141635600
**测试结果**: ❌ 游戏在第一轮出牌后卡住，无法继续

## 问题列表

| 编号 | 问题名称 | 严重程度 | 文件 |
|------|----------|----------|------|
| 1 | 缺少找朋友环节 | ⭐⭐⭐ 高 | `问题1-缺少找朋友环节.md` |
| 2 | 手牌元素不稳定无法点击 | ⭐⭐⭐ 高 | `问题2-手牌元素不稳定无法点击.md` |
| 3 | AI跟牌违反牌型规则 | ⭐⭐⭐ 高 | `问题3-AI跟牌违反牌型规则.md` |
| 4 | 出牌后手牌数量更新异常 | ⭐⭐ 中 | `问题4-出牌后手牌数量更新异常.md` |
| 5 | 游戏流程卡住 | ⭐⭐⭐ 高 | `问题5-游戏流程卡住.md` |
| 6 | 找朋友规则描述错误 | ⭐⭐ 中 | `问题6-找朋友规则描述错误.md` |

## 问题分类

### 核心逻辑问题 (3个)
- **问题1**: 找朋友环节缺失
- **问题3**: AI跟牌规则违反
- **问题5**: 游戏流程卡住

### UI交互问题 (2个)
- **问题2**: 手牌元素不稳定
- **问题4**: 手牌数量统计错误

### 文档问题 (1个)
- **问题6**: 找朋友规则描述错误

## 修复优先级

### P0 - 阻塞性问题（必须立即修复）
1. **问题5 - 游戏流程卡住**: 导致游戏完全无法进行

### P1 - 高优先级（严重影响体验）
2. **问题3 - AI跟牌规则**: 核心游戏逻辑错误
3. **问题2 - 手牌点击**: 需要workaround才能操作
4. **问题1 - 找朋友环节**: 核心机制缺失

### P2 - 中优先级（影响准确性）
5. **问题4 - 手牌计数**: 状态显示不准确
6. **问题6 - 规则描述**: 多处文档规则描述错误

## 测试环境

```
操作系统: Windows
浏览器: Playwright (Chromium)
服务器: http://localhost:8080
主牌: 梅花
玩家等级: 2级
玩家ID: player123
```

## 测试过程

1. ✅ 进入游戏大厅
2. ✅ 创建单人模式游戏
3. ✅ 成为庄家（主牌：梅花）
4. ✅ 扣牌（扣掉全部7张黑桃）
5. ❌ **跳过了找朋友环节**（问题1）
6. ⚠️ 尝试出牌（问题2：需要强制移除dealing类）
7. ✅ 出两张梅花Q（对子）
8. ❌ AI-5只跟了单张黑桃2（问题3）
9. ❌ 手牌数量错误（问题4）
10. ❌ 游戏卡住，无法继续（问题5）

## 网络请求记录

```
[POST] /api/game/singleplayer => 200 OK
[POST] /api/game/{id}/discard-bottom => 200 OK (扣牌)
[POST] /api/game/{id}/play => 200 OK (玩家出牌)
[POST] /api/game/{id}/ai-play => 200 OK (AI-5出牌)
[POST] /api/game/{id}/ai-play => 200 OK (AI-2尝试出牌?)
(后续AI-3、AI-4未触发ai-play请求)
```

所有API请求返回200，但逻辑层面存在严重问题。

## 相关文件

- `问题汇总.md`: 本文件
- 各个问题的详细说明文档

## 建议

1. **立即修复问题5**: 确保游戏流程能正常走完
2. **检查AI逻辑**: 确保AI遵守跟牌规则且能按顺序出牌
3. **完善找朋友机制**: 实现轮盘选择器界面
4. **修复动画**: 确保dealing动画正确结束
5. **修复计数**: 检查手牌数量更新逻辑

## 后续测试计划

待上述问题修复后，需要继续测试：
- [ ] 完整的出牌流程
- [ ] 甩牌机制
- [ ] 抠底机制
- [ ] 分数计算
- [ ] 升级逻辑
- [ ] 游戏结束判定
- [ ] 回放功能
